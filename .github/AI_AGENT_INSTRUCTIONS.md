# AI Agent Instructions for SharpCodeSearch

This document provides guidelines for AI agents (GitHub Copilot, Claude, GPT-4, etc.) working on the SharpCodeSearch project. Following these instructions ensures consistency, quality, and proper collaboration with human maintainers.

---

## ğŸ¯ Core Principles

### 1. Follow the Roadmap
- **Primary Reference**: Always consult `/Docs/ROADMAP.md` before starting work
- **Sequential Execution**: Complete phases and tasks in the order specified unless explicitly instructed otherwise
- **Task Completion**: Mark tasks as complete (`[x]`) in the roadmap after finishing them
- **Adaptability**: The roadmap can and should be updated/adapted as the project evolves, but changes should be discussed with the user first

### 2. Incremental Development with User Validation
- **Complete One Task at a Time**: Finish discrete, well-defined tasks before moving to the next
- **Wait for Validation**: After completing a task or group of related tasks, **STOP and wait for the user to perform manual checks**
- **Do NOT Auto-Commit**: Never commit changes to git automatically. Wait for explicit user approval
- **Verification Steps**: After completing a task, summarize what was done and ask the user to verify before proceeding

### 3. Collaborative Decision Making
- **Technical Decisions**: When facing technical choices (architecture, libraries, patterns, algorithms), **DO NOT decide unilaterally**
- **Present Options**: Provide 2-4 well-researched options with:
  - Pros and cons of each approach
  - Performance implications
  - Maintainability considerations
  - Alignment with project goals
  - Your recommendation with clear reasoning
- **Wait for Approval**: Let the user make the final decision
- **Document Decisions**: Update relevant documentation with the chosen approach and rationale

### 4. Code Quality Standards
- **Test Coverage**: Maintain >90% code coverage as specified in the roadmap
- **Follow Conventions**: 
  - C# Backend: Follow `.editorconfig` settings and standard C# conventions
  - TypeScript Extension: Follow VS Code extension best practices
  - Use provided linters and formatters
- **Documentation**: Document all public APIs, complex logic, and non-obvious decisions
- **Error Handling**: Implement comprehensive error handling with clear, actionable error messages

---

## ğŸ“‹ Workflow Guidelines

### Before Starting Work
1. âœ… Read the current phase in `/Docs/ROADMAP.md`
2. âœ… Review related documentation in `/Docs/` directory
3. âœ… Check existing code structure and patterns
4. âœ… Verify prerequisites are met for the task
5. âœ… Ask clarifying questions if requirements are ambiguous

### During Development
1. âœ… Follow the task breakdown in the roadmap
2. âœ… Write tests alongside code (TDD approach when feasible)
3. âœ… Keep commits focused and atomic (but wait for user approval to commit)
4. âœ… Update documentation as features are implemented
5. âœ… Run existing tests to ensure no regressions
6. âœ… Perform basic manual testing of new functionality

### After Completing a Task
1. âœ… Mark the task as complete in the roadmap: `- [x] Task description`
2. âœ… Run all tests and verify they pass
3. âœ… Update relevant documentation
4. âœ… Provide a summary of changes to the user
5. âœ… **WAIT for user validation** before committing or proceeding
6. âœ… Address any issues found during manual testing

### Commit Process
1. âœ… User performs manual verification
2. âœ… User approves the changes
3. âœ… Suggest commit message following conventional commits format
4. âœ… Wait for user to execute the commit command
5. âœ… Proceed to next task only after commit is made

---

## ğŸ”§ Technical Guidelines

### Project Structure
```
SharpCodeSearch/
â”œâ”€â”€ .github/              # GitHub configuration and workflows
â”œâ”€â”€ Docs/                 # All project documentation
â”‚   â”œâ”€â”€ ROADMAP.md       # PRIMARY REFERENCE - Project roadmap
â”‚   â”œâ”€â”€ ARCHITECTURE.md   # Technical architecture
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src/                  # Source code (all code goes here)
â”‚   â”œâ”€â”€ backend/         # C# pattern matching engine
â”‚   â””â”€â”€ extension/       # VS Code extension (TypeScript)
â”œâ”€â”€ tests/               # Test projects
â”œâ”€â”€ .gitignore          # Generated by dotnet CLI
â”œâ”€â”€ .editorconfig       # Generated by dotnet CLI
â”œâ”€â”€ .gitattributes      # Generated by dotnet CLI
â”œâ”€â”€ LICENSE             # MIT License
â””â”€â”€ CONTRIBUTING.md     # Contribution guidelines
```

### Architecture Decisions
- **Backend**: C# with Roslyn for AST manipulation
- **Frontend**: TypeScript VS Code extension
- **Communication**: LSP or CLI-based (decision to be made in Phase 1)
- **Testing**: xUnit (backend), Jest (extension)
- **Documentation**: Markdown

### Code Organization
- **All code must be in `/src` directory**
- **Backend code**: `/src/backend/`
- **Extension code**: `/src/extension/`
- **Shared code**: Minimize; prefer clear boundaries
- **Tests**: Co-located with source or in separate test projects

### Naming Conventions
- **C# Files**: PascalCase (e.g., `PatternMatcher.cs`)
- **TypeScript Files**: camelCase or kebab-case (e.g., `patternMatcher.ts` or `pattern-matcher.ts`)
- **Classes**: PascalCase
- **Methods/Functions**: PascalCase (C#), camelCase (TypeScript)
- **Variables**: camelCase
- **Constants**: UPPER_SNAKE_CASE or PascalCase (C#)

---

## ğŸš« What NOT to Do

### âŒ Don't Make These Mistakes
1. **Don't skip ahead** in the roadmap without user approval
2. **Don't commit automatically** - always wait for user validation
3. **Don't make major technical decisions alone** - present options
4. **Don't create code outside `/src` directory** - all code in src/
5. **Don't skip tests** - maintain >90% coverage
6. **Don't ignore the roadmap** - it's the primary guide
7. **Don't create large monolithic changes** - keep tasks focused
8. **Don't assume requirements** - ask for clarification
9. **Don't modify configuration files without discussion** - `.gitignore`, `.editorconfig`, etc. are generated by dotnet CLI
10. **Don't proceed if tests fail** - fix issues before moving on

### âŒ Anti-Patterns to Avoid
- Creating placeholder/stub implementations without full functionality
- Writing code without corresponding tests
- Ignoring error handling and edge cases
- Poor documentation or missing comments
- Inconsistent code style
- Over-engineering simple solutions
- Under-engineering complex problems

---

## âœ… What TO Do

### âœ… Best Practices
1. **Read before writing** - understand existing code and patterns
2. **Test-driven development** - write tests first when possible
3. **Clear communication** - explain what you're doing and why
4. **Ask questions** - if unsure, ask rather than guess
5. **Small iterations** - complete small, verifiable chunks
6. **Document decisions** - update docs as you work
7. **Follow conventions** - consistency over personal preference
8. **Think about performance** - but don't prematurely optimize
9. **Consider maintainability** - code will be read more than written
10. **Respect the roadmap** - it's carefully planned

### âœ… Decision-Making Framework
When you need to make a decision:

**Minor Decisions** (OK to proceed):
- Variable/method naming
- Code formatting within style guidelines
- File organization within established patterns
- Test case selection

**Major Decisions** (MUST consult user):
- Architecture changes
- New dependencies/libraries
- API design
- Database schema
- Performance vs. simplicity trade-offs
- Security implementations
- Breaking changes to existing code
- Deviation from roadmap

**When in Doubt**: Ask the user!

---

## ğŸ“ Communication Templates

### Task Completion Summary
```
âœ… Completed: [Task Name from Roadmap]

Changes Made:
- [Specific change 1]
- [Specific change 2]
- [Specific change 3]

Files Modified:
- src/backend/File1.cs
- src/extension/file2.ts

Tests:
- Added: X new tests
- All tests passing: âœ…
- Coverage: Y%

Next Steps:
Please verify:
1. [Specific verification step 1]
2. [Specific verification step 2]

Once verified, I'll update the roadmap and we can proceed to the next task.
```

### Technical Decision Request
```
ğŸ¤” Technical Decision Required: [Brief Description]

Context:
[Explain the situation and why a decision is needed]

Option 1: [Approach Name]
âœ… Pros:
  - [Pro 1]
  - [Pro 2]
âŒ Cons:
  - [Con 1]
  - [Con 2]

Option 2: [Approach Name]
âœ… Pros:
  - [Pro 1]
  - [Pro 2]
âŒ Cons:
  - [Con 1]
  - [Con 2]

Recommendation:
I recommend [Option X] because [clear reasoning].

What would you like to proceed with?
```

---

## ğŸ“ Learning Resources

### Required Reading
- `/Docs/ROADMAP.md` - Project roadmap and timeline
- `/Docs/ARCHITECTURE.md` - Technical architecture
- `/CONTRIBUTING.md` - Contribution guidelines

### Key Technologies
- **Roslyn**: Microsoft.CodeAnalysis documentation
- **VS Code Extensions**: VS Code Extension API
- **TypeScript**: TypeScript handbook
- **C# 10+**: Latest C# features

### Patterns to Follow
- VS Code extension patterns and best practices
- Clean architecture principles
- SOLID principles
- Test-driven development (TDD)

---

## ğŸ”„ Continuous Improvement

### Updating These Instructions
- These instructions are living documents
- If you identify gaps or ambiguities, suggest updates
- Discuss changes with the user before implementing
- Keep instructions concise and actionable

### Updating the Roadmap
- Roadmap can be adapted as project evolves
- Discuss changes with user before modifying
- Keep success criteria clear and measurable
- Update time estimates based on actual progress

### Git Commands
- **ALWAYS run git commands from the workspace root directory** (not from subdirectories)
- Before running `git add`, `git commit`, or `git status`, navigate to the repository root
- Use: `cd C:\Users\MUSSET\source\repos\Misc\SharpCodeSearch` (or equivalent root path)
- This ensures all changes (backend, tests, docs, etc.) are included in commits
- Running git from subdirectories will only stage/commit files in that subdirectory

---

## ğŸ†˜ When Things Go Wrong

### If Tests Fail
1. Don't proceed to next task
2. Analyze the failure
3. Fix the issue
4. Re-run all tests
5. Verify fix with user

### If You're Stuck
1. Acknowledge the issue clearly
2. Explain what you've tried
3. Ask specific questions
4. Suggest alternatives or workarounds
5. Wait for user guidance

### If Requirements Are Unclear
1. Don't guess or assume
2. Ask clarifying questions
3. Reference roadmap and docs
4. Propose interpretation and ask for confirmation
5. Document the clarification

---

## ğŸ“Š Success Metrics

Track these throughout development:
- âœ… Tasks completed from roadmap
- âœ… Test coverage percentage (target >90%)
- âœ… Build success rate (should be 100%)
- âœ… Documentation completeness
- âœ… Code review feedback incorporation
- âœ… Performance benchmarks met

---

## ğŸ¯ Phase-Specific Notes

### Phase 1: Foundation & Prototyping
- Focus on getting basic infrastructure working
- Prioritize learning Roslyn and VS Code APIs
- Extensive testing of core pattern matching
- Document discoveries and decisions

### Phase 2: Core Functionality
- Build on Phase 1 foundation
- Maintain backward compatibility
- Comprehensive integration testing
- Performance baseline establishment

### Phase 3: Advanced Features
- Don't compromise core functionality
- Extensive performance testing
- Consider edge cases thoroughly
- User experience is critical

### Phase 4: Polish & Refinement
- No new features - only improvements
- Focus on documentation and examples
- Prepare for real-world usage
- Gather user feedback

### Phase 5: Release & Distribution
- Final validation of all functionality
- Complete documentation review
- Marketing materials and demos
- Community engagement plan

---

## ğŸ“ Summary

**Remember:**
1. ğŸ“– Follow the roadmap (but adapt as needed)
2. âœ‹ Wait for user validation before committing
3. ğŸ¤ Collaborate on technical decisions
4. âœ… Complete tasks thoroughly with tests
5. ğŸ“ Document everything
6. ğŸ¯ Focus on quality over speed
7. ğŸ’¬ Communicate clearly and often

**Your Role:**
You're a collaborative development partner, not an autonomous agent. Work WITH the user to build a high-quality, maintainable codebase that follows the project vision.

**When in Doubt:**
ASK. It's better to ask and get it right than to assume and waste time.

---

*Last Updated: February 4, 2026*
